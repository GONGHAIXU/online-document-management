<head>
<meta http-equiv="Content-Type" content="multipart/form-data; charset=utf-8"/>
    <title>我的文件</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style type="text/css">
        
    </style>
	<script>
        $(window).scroll(function () {
            if ($(".navbar").offset().top > 50) {$(".navbar-fixed-top").addClass("top-nav");
            }else {$(".navbar-fixed-top").removeClass("top-nav");}
        })
		function setCookie(c_name, value, expiredays) {
		 var exdate = new Date();
		 exdate.setDate(exdate.getDate + expiredays);
		 document.cookie = c_name + "=" + escape(value) + ((expiredays==null) ? "" : ";expires="+exdate.toGMTString()); 
		 }
		 function getCookie(c_name){
		 if (document.cookie.length>0){
			c_start=document.cookie.indexOf(c_name + "=")//检测这个cookie是否存在
			if (c_start!=-1){ 
				c_start=c_start + c_name.length+1 //获取到cookie的值的开始位置
				c_end=document.cookie.indexOf(";",c_start)//从c_start开始查找";"的存在
				if (c_end==-1) c_end=document.cookie.length//如果没找到，说明是最后一项
			return unescape(document.cookie.substring(c_start,c_end))//把cookie的值拆分出来并且对这个值进行解码，unescape()与escape()相对，对被escape()编码的字符串进行解码
				} 
			}
		 return ""//不存在就返回空
		 }
		 function checkIdentify() {
		 username = getCookie("username");
		 if(username == null || username == "") {
			alert("用户尚未登录，请先登录！");
			window.open("login.html", "_blank");//如果用户还未登录，那么返回登录界面
		 }
		 } 		
	</script>
</head>
<body>
<nav class="navbar navbar-default">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand navbar-left" href="#">九日云</a>
			</div>
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav navbar-left">
					<li class="active"><a href="home.html">我的文件<span class="sr-only">(current)</span></a></li>
					<li><a href="shares.html">找资源</a></li>
					<li><a href="more.html">更多</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="#">联系我们</a></li>
				</ul>
			</div>
			</div>
		</div>
	</nav>


<div class="container">
    <br>

    <p>
    <h2 align="center">我的文件</h2>


    </p>
    <div id="alerts"></div>
    <div style="margin-top:30px"class="form-group">
        <form id="uploadForm" enctype="multipart/form-data" class="form-inline">
            <label for="file">上传文件：</label>
            <input class="form-control" id="file" type="file" name="file"/>
            <button id="upload" type="button" class="btn btn-primary">上传</button>
        </form>
	</div>
    <div style="margin-top:20px"class="form-group">
        <form class="form-inline" action="/filesearch">
            <label for="search">搜索文件：</label>
            <input type="text" class="form-control" id="search" name="name" placeholder="文件名" required>
            <button type="submit" class="btn btn-primary">搜索</button>
        </form>
    </div>
    </div>
        </tbody>
    </table>
</div>
</body>
<script>
    $('#upload').click(function () {
        $.ajax({
            url: 'http://localhost:8080/upload',
            type: 'POST',
            cache: false,
            data: new FormData($('#uploadForm')[0]),
            processData: false,
            contentType: false
        }).done(function (res) {
            console.log(res);
            if (!res.success) {
                alert('上传成功.');
            } else {
                alert(res.msg || '上传失败');
            }
        }).fail(function (res) {
        });
    });


    function showmsg(mode, str) {
        document.querySelector("#alerts").innerHTML = '<div class="alert alert-' + mode + ' fade-in"><button type="button" class="close" data-dismiss="alert">&times;</button><strong>' + str + '</strong></div>'
    }

</script>
</html>
